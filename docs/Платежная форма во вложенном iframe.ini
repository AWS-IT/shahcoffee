Платежная форма во вложенном iframe
Иногда приложение используется внутри iframe, который находится внутри другого iframe. Для работы виджета нужно встроить скрипт и инициализировать его во всех вложенных iframe:

Встройте и инициализируйте скрипт в основную родительскую страницу:
<iframe id="payment-form-iframe"></iframe

// Загрузка и инициализация скрипта (js-код)
await mainPaymentIntegration.connect(document.getElementById('payment-form-iframe'))

Встройте и инициализируйте скрипт во вложенных iframe. Каждый промежуточный скрипт будет перенаправлять сообщения в следующий iframe. В конечном вложенном iframe виджет подключается аналогично.
<iframe id="payment-form-iframe"></iframe>

// Загрузка и инициализация скрипта (js-код)
await innerPaymentIntegration.connect(document.getElementById('payment-form-iframe')) // Если iframe создан

Примеры полной конфигурации

Из глобальной конфигурации
<div id="paymentContainer"></div>
<script>
  /**
   * URL — это URL вашего бэкенд-сервиса, который вызовет метод «Инициировать платеж» и вернет PaymentURL
   * @type {string}
   */
  const URL = 'https://Init';
  /**
   * INIT_PARAMS — необходимые параметры тела запроса, которые принимает ваш бэкенд-сервис
   * @type object
   */
  const INIT_PARAMS = {};
</script>
<script
  async
  onload="onPaymentIntegrationLoad()"
  src="https://integrationjs.tbank.ru/integration.js"
></script>
<script>
  const initConfig = {
    terminalKey: 'myTerminalKey', // Значение TerminalKey из личного кабинета
    product: 'eacq',
    features: {
      iframe: {
        container: document.getElementById('paymentContainer'),           
        paymentStartCallback: async () => {
          const res = await new PaymentIntegration.Helpers().request(URL, 'POST', INIT_PARAMS);
          return res.PaymentURL;
        },
      },
    },
  };
 
  function onPaymentIntegrationLoad() {
    PaymentIntegration.init(initConfig).then().catch();
  }
</script>


Динамически
<div id="paymentContainer"></div>
<script>
  /**
   * URL — это URL вашего бэкенд-сервиса, который вызовет метод «Инициировать платеж» и вернет PaymentURL
   * @type {string}
   */
  const URL = 'https://Init';
  /**
   * INIT_PARAMS — необходимые параметры тела запроса, которые принимает ваш бэкенд-сервис
   * @type object
   */
  const INIT_PARAMS = {};
</script>
<script
  async
  onload="onPaymentIntegrationLoad()"
  src="https://integrationjs.tbank.ru/integration.js"
></script>
<script>
  const initConfig = {
    terminalKey: 'myTerminalKey', // Значение TerminalKey из личного кабинета
    product: 'eacq',
    features: {
      iframe: {}
    },
  };
 
  function onPaymentIntegrationLoad() {
    PaymentIntegration.init(initConfig)
      .then(async (integration) => {
        const MAIN_INTEGRATION_NAME = 'main-integration-name';
        const iframeConfig = {};
        const mainPaymentIntegration = await integration.iframe.create(MAIN_INTEGRATION_NAME, iframeConfig);
 
        const container = document.getElementById('paymentContainer');
 
        const res = await new PaymentIntegration.Helpers().request(URL, 'POST', INIT_PARAMS);
 
        await mainPaymentIntegration.mount(container, res.PaymentURL);
      })
      .catch();
  }
</script>


Платежная форма во вложенном iframe
1. Добавьте и инициализируйте скрипт на основном сайте:
<iframe id="first-iframe" src="https://IFRAME_FIRST_URL"></div>
<script
  async
  onload="onPaymentIntegrationLoad()"
  src="https://integrationjs.tbank.ru/integration.js"
></script>
<script>
  const initConfig = {
    terminalKey: 'myTerminalKey', // Значение TerminalKey из личного кабинета
    product: 'eacq',
    features: {
      iframe: {},
    },
  };
 
  function onPaymentIntegrationLoad() {
    PaymentIntegration.init(initConfig)
      .then(async (integration) => {
        const MAIN_INTEGRATION_NAME = 'main-integration-name';
        const iframeConfig = {};
        const mainPaymentIntegration = await integration.iframe.create(MAIN_INTEGRATION_NAME, iframeConfig);
 
        const iframe = document.getElementById('first-iframe');
 
        await mainPaymentIntegration.connect(iframe);
      })
      .catch();
  }
</script>

2. Подключите скрипт для вложенного iframe.